### `ps` 查看当前系统进程状态

process status

`ps aux | grep xxx` 查看所有进程

`ps -ef | grep xxx` 查看子父进程的关系


| 选项 | 功能                                       |
| ------ | -------------------------------------------- |
| a    | 列出带有终端的所有用户的进程               |
| x    | 列出当前用户的所有进程，包括没有终端的进程 |
| u    | 面向用户友好的显示风格                     |
| -e   | 列出所有进程                               |
| -u   | 列出某个用户关联的所有进程                 |
| -f   | 显示完整格式的进程列表                     |

psaux显示信息说明

* USER：该进程是由哪个用户产生的PID：进程的 ID号
* %CPU：该进程占用 CPU资源的百分比，占用越高，进程越耗费资源；
* %MEM：该进程占用物理内存的百分比，占用越高，进程越耗费资源；
* VSZ：该进程占用虚拟内存的大小，单位KB；
* RSS：该进程占用实际物理内存的大小，单位KB；
* TTY：该进程是在哪个终端中运行的。对于CentOS来说，tty1是图形化终端，
* tty2-tty6 是本地的字符界面终端。pts/0-255代表虚拟终端。
* STAT：进程状态。常见的状态有：R：运行状态、S：睡眠状态、T：暂停状态、Z：僵尸状态、s：包含子进程、l：多线程、+：前台显示
* START：该进程的启动时间
* TIME：该进程占用
  CPU的运算时间，注意不是系统时间
* COMMAND：产生此进程的命令名

ps-ef显示信息说明

* UID：用户 IDPID：进程
  IDPPID：父进程 ID
* C：CPU用于计算执行优先级的因子。数值越大，表明进程是
  CPU密集型运算，执行优先级会降低；数值越小，表明进程是 I/O密集型运算，执行优先级会提高STIME：进程启动的时间
* TTY：完整的终端名称TIME：CPU时间
* CMD：启动进程所用的命令和参数

### `kill` 终止进程

`kill [选项] 进程ID` 

`killall 进程名称` (支持通配符)


| 选项 | 功能                 |
| ------ | ---------------------- |
| -9   | 表示强迫进程立即停止 |

### `pstree`查看进程树

`pstree [选项]`


| 选项 | 功能               |
| ------ | -------------------- |
| -p   | 显示进程的PID      |
| -u   | 显示进程的所属用户 |

### `top` 实时监控进程状态

top [选项]


| 选项   | 功能                                                                       |
| -------- | ---------------------------------------------------------------------------- |
| -d秒数 | 指定top命令每隔几秒更新。默认是3秒在top命令的交互模式当 中可以执行的命令： |


| -i | 使top不显示任何闲置或者僵死进程。            |
| ---- | ---------------------------------------------- |
| -p | 通过指定监控进程ID来仅仅监控某个进程的状态。 |



| 操作 | 功能                          |
| ------ | ------------------------------- |
| P    | 以CPU使用率排序，默认就是此项 |
| M    | 以内存的使用率排序            |
| N    | 以PID排序                     |
| q    | 退出top                       |



| 内容                        | 说明                                                                                                |
| ----------------------------- | ----------------------------------------------------------------------------------------------------- |
| 12:26:46                    | 系统当前时间                                                                                        |
| up1day,13:32                | 系统的运行时间，本机已经运行1天 13小时32分钟                                                        |
| 2users                      | 当前登录了两个用户                                                                                  |
| loadaverage:0.00, 0.00,0.00 | 系统在之前1分钟，5分钟，15分钟的平均负载。一般认为小于1时，负载较小。如果大于 1，系统已经超出负荷。 |

第二行为进程信息

表 7-36


| Tasks:95total | 系统中的进程总数                          |
| --------------- | ------------------------------------------- |
| 1 running     | 正在运行的进程数                          |
| 94sleeping    | 睡眠的进程                                |
| 0 stopped     | 正在停止的进程                            |
| 0zombie       | 僵尸进程。如果不是0，需要手工检查僵尸进程 |

第三行为CPU信息

表 7-37


| Cpu(s):0.1%us | 用户模式占用的CPU百分比               |
| --------------- | --------------------------------------- |
| 0.1%sy        | 系统模式占用的CPU百分比               |
| 0.0%ni        | 改变过优先级的用户进程占用的CPU百分比 |
| 99.7%id       | 空闲CPU的CPU百分比                    |
| 0.1%wa        | 等待输入/输出的进程的占用CPU百分比    |
| 0.0%hi        | 硬中断请求服务占用的CPU百分比         |
| 0.1%si        | 软中断请求服务占用的CPU百分比         |


| 0.0%st | st（Stealtime）虚拟时间百分比。就是当有虚拟 机时，虚拟CPU等待实际CPU的时间百分比。 |
| -------- | ------------------------------------------------------------------------------------ |

第四行为物理内存信息

表 7-38


| Mem: 625344ktotal | 物理内存的总量，单位KB                                                                    |
| ------------------- | ------------------------------------------------------------------------------------------- |
| 571504kused       | 已经使用的物理内存数量                                                                    |
| 53840kfree        | 空闲的物理内存数量，我们使用的是虚拟机，总共只分配了628MB 内存，所以只有53MB的空 闲内存了 |
| 65800kbuffers     | 作为缓冲的内存数量                                                                        |

第五行为交换分区（swap）信息

表 7-39


| Swap:524280k total | 交换分区（虚拟内存）的总大小 |
| -------------------- | ------------------------------ |
| 0k used            | 已经使用的交互分区的大小     |
| 524280kfree        | 空闲交换分区的大小           |
| 409280kcached      | 作为缓存的交互分区的大小     |

### `netstat`查看网络状态和端口监控

`netstat -anp | grep 端口号`

`netstat -nlp | grep 端口号`


| 选项 | 功能                                                 |
| ------ | ------------------------------------------------------ |
| -a   | 显示所有正在监听（listen）和未监听的套接字（socket） |
| -n   | 拒绝显示别名，能显示数字的全部转化成数字             |
| -l   | 仅列出在监听的服务状态                               |
| -p   | 表示显示哪个进程在调用                               |
