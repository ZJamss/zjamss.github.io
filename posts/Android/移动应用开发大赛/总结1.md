

### 常量类

```java
public class Constants {
    public static final String REQUEST_FAILED = "request_failed";
    public static final String NETWORK_FAILED = "network_failed";
    public static final String REQUEST_INFO = "request_info";

    public static final String USER_INFO = "user_info";
    public static final String PATIENTS = "patients";
    public static final String IS_LOGIN = "is_login";
    public static final String GET_TOKEN = "get_token";
    public static final String KEY_WORD = "key_word";
    public static final String ACTIVITY_INFO = "activity_info";

    public static final String BASE_URL = "http://124.93.196.45:10001";

    public static String TOKEN = null;

}
```

All constants can be stored in the Application Class when match

### 请求统一管理

```java
public interface Request {
    @GET("/prod-api/api/rotation/list?type=2")
    Call<BannerDTO> getBannerList();

    @GET("/prod-api/api/service/list")
    Call<RecommendedServiceDTO> getRecommendedServiceList();

    @GET("/prod-api/press/category/list")
    Call<NewsTagDTO> getNewsTagList();

    @GET("/prod-api/press/press/list")
    Call<NewsDTO> getNewsList();

    @POST("/prod-api/api/login")
    Call<LoginDTO> login(@Body RequestBody body);

    @POST("/prod-api/api/register")
    Call<BasicDTO> register(@Body User user);

    @GET("/prod-api/api/common/user/getInfo")
    Call<UserInfoDTO> getUserInfo(@Header("Authorization") String token);

    @PUT("/prod-api/api/common/user")
    Call<BasicDTO> updateUserInfo(@Header("Authorization") String token, @Body UserInfoDTO.UserDTO user);

    @POST("/prod-api/api/common/feedback")
    Call<BasicDTO> feedback(@Body RequestBody body);

    @PUT("/prod-api/api/common/user/resetPwd")
    Call<BasicDTO> updateUserPasswd(@Header("Authorization") String token,@Body RequestBody body);

    @GET("/prod-api/api/activity/rotation/list")
    Call<BannerDTO> getActivityBanner();

    @GET("/prod-api/api/activity/category/list")
    Call<ActivityTagDTO> getActivityTags();

    @GET("/prod-api/api/activity/activity/list?&pageNum=1&pageSize=999")
    Call<ActivityDTO> getActivities(@Query("recommend") String recommend);

    @GET("/prod-api/api/activity/comment/list?pageNum=1&pageSize=30")
    Call<ActivityCommentDTO> getActivityCommentById(@Query("activityId") int id);

    @POST("/prod-api/api/activity/comment")
    Call<BasicDTO> addComment(@Header("Authorization") String token, @Body RequestBody body);

    @POST("/prod-api/api/activity/signup")
    Call<BasicDTO> signUpActivity(@Header("Authorization") String token,@Body RequestBody body);

    @GET("/prod-api/api/hospital/hospital/list")
    Call<HospitalListDTO> getHospitalList();

    @GET("/prod-api/api/hospital/patient/list")
    Call<PatientCardDTO> getPatientCardList(@Header("Authorization") String token);

    @POST("/prod-api/api/hospital/patient")
    Call<BasicDTO> createPatientCard(@Header("Authorization") String token,@Body RequestBody body);

    @GET("/prod-api/api/hospital/category/list")
    Call<OutpatientDepartment> getOutpatientDepartmentList();

    @POST("/prod-api/api/hospital")
    Call<BasicDTO> book(@Header("Authorization") String token,@Body RequestBody body);
}
```

it's not a normative project,just a match. Whatever

Use`http.request.xxx()` to send request when we need

```java
public class http {

    public static Request request;

    private static Retrofit retrofit;

    static {
        retrofit = new Retrofit.Builder()
                .baseUrl(Constants.BASE_URL)
                .addConverterFactory(GsonConverterFactory.create())
                .build();
        request = retrofit.create(Request.class);
    }

}
```

### arr使用方式

insert `implementation fileTree(dir: 'libs', include: ['*.jar','*.aar'])` in `build.gradle(:app)` `s dependencies node

### Banner必须设置高度

### 嵌套fragment必须指定id

![image-20220624165731805](模拟题记录.assets/image-20220624165731805.png)

### 指定BaseActivity来配置标题栏

```java
package com.zjamss.smartcity4.widget;

import android.content.Context;
import android.content.Intent;
import android.os.Bundle;

import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;

/**
 * @Program: SmartCity4
 * @Description:
 * @Author: ZJamss
 * @Create: 2022-06-29 16:28
 **/
public class BaseActivity extends AppCompatActivity {



    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(getSupportActionBar() != null){
            getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        }
    }

    @Override
    public boolean onSupportNavigateUp() {
        finish();
        return true;
    }

    public void setTile(String t){
        if(getSupportActionBar() != null){
            getSupportActionBar().setTitle(t);
        }
    }

    public static void action(Context context,Class<? extends BaseActivity> clazz,String data){
        Intent intent = new Intent(context,clazz);
        intent.putExtra("data",data);
        context.startActivity(intent);
    }
}

```





### ListView替代RecyclerView

```java
http.service.getBusList().enqueue(new CallBackImpl<BusListDTO>() {
            @Override
            public void onResponse(Call<BusListDTO> call, Response<BusListDTO> response) {
                List<BusListDTO.RowsDTO> rows = response.body().getRows();
                busList.setAdapter(new ArrayAdapter<BusListDTO.RowsDTO>(
                        SmartBusActivity.this, R.layout.bus_item, R.id.busName, rows
                ) {
                    @NonNull
                    @Override
                    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {
                        View v = super.getView(position, convertView, parent);
                        TextView busName;
                        TextView busPath;
                        TextView busPrice;
                        TextView busMileage;
                        TextView busDate;

                        busName = v.findViewById(R.id.busName);
                        busPath = v.findViewById(R.id.busPath);
                        busPrice = v.findViewById(R.id.busPrice);
                        busMileage = v.findViewById(R.id.busMileage);
                        busDate = v.findViewById(R.id.busDate);


                        BusListDTO.RowsDTO bus = rows.get(position);

                        v.setOnClickListener(view -> BusInfoActivity.action(SmartBusActivity.this, bus));

                        busName.setText(bus.getName());
                        busPath.setText("起终点: " + bus.getFirst() + " - " + bus.getEnd());
                        busPrice.setText("票价: " + bus.getPrice());
                        busMileage.setText("里程: " + bus.getMileage());
                        busDate.setText("运行时间: " + bus.getStartTime() + " - " + bus.getEndTime());
                        return v;
                    }
                });
```